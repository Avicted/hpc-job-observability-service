# HPC Job Observability Service - Environment Configuration
# Copy this file to .env and update the values for your environment.
# NEVER commit the .env file to version control!

# =============================================================================
# Server Configuration
# =============================================================================

# Port the server listens on
PORT=8080

# Host address to bind to (0.0.0.0 for all interfaces)
HOST=0.0.0.0

# =============================================================================
# Database Configuration
# =============================================================================

# Database type: "sqlite" or "postgres"
DATABASE_TYPE=postgres

# Database connection string
# For SQLite: file:hpc_jobs.db?cache=shared&mode=rwc
# For PostgreSQL: postgres://user:password@host:port/dbname?sslmode=disable
DATABASE_URL=postgres://hpc:CHANGE_ME_IN_PRODUCTION@localhost:5432/hpc_jobs?sslmode=disable

# PostgreSQL specific settings (used by docker-compose)
POSTGRES_USER=hpc
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION
POSTGRES_DB=hpc_jobs

# =============================================================================
# Metrics Configuration
# =============================================================================

# Number of days to retain metric samples before cleanup
METRICS_RETENTION_DAYS=7

# =============================================================================
# Scheduler Configuration
# =============================================================================

# Scheduler backend (required): "mock" or "slurm"
# - mock: Uses in-memory mock job source for development/testing
# - slurm: Connects to a real SLURM cluster via slurmrestd
SCHEDULER_BACKEND=slurm

# Slurm configuration (required when SCHEDULER_BACKEND=slurm)
# Base URL of the slurmrestd server
# For local/native runs: http://localhost:6820
# NOTE: When using docker-compose, this is overridden to http://slurm:6820
SLURM_BASE_URL=http://localhost:6820

# SLURM REST API version (check your slurmrestd with /openapi/v3 endpoint)
# Common versions: v0.0.36 (Slurm 21.x), v0.0.38 (Slurm 22.x), v0.0.39 (Slurm 23.x)
SLURM_API_VERSION=v0.0.36

# Authentication token for slurmrestd (optional, depends on auth config)
# Leave empty when using rest_auth/local with docker-compose slurm profile
SLURM_AUTH_TOKEN=

# =============================================================================
# Grafana Configuration
# =============================================================================

# Grafana admin credentials
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_IN_PRODUCTION

# Enable anonymous access (set to false in production)
GF_AUTH_ANONYMOUS_ENABLED=true
GF_AUTH_ANONYMOUS_ORG_ROLE=Viewer

# =============================================================================
# Mock Server Configuration (Development Only)
# =============================================================================

MOCK_PORT=8081
MOCK_HOST=0.0.0.0
